import{i as pe,k as fe,s as je,_ as H,r as c,n as ge,o as be,j as e,p as ve,q as ye,c as U,b as re,d as ae,B as m,aw as we,ax as _,T as g,E as Y,x as Ce,I as V,D as oe,t as K,f as A,u as F,g as M,G as p,P as B,C as Z,ay as Ie,F as Q,Q as q,L as Se}from"./index-7eb3e469.js";import{T as ne,a as D,E as Ne}from"./Edit-90796f30.js";import{C as k,a as O}from"./CardContent-7428a288.js";import{C as G}from"./Chip-09e1a2f1.js";import{C as Pe,E as Ae}from"./ExpandMore-fefbacad.js";import{T as y}from"./TextField-041322db.js";import{I as N}from"./InputAdornment-796da98e.js";import{R as ie}from"./Refresh-becb9bf5.js";import{A as le}from"./Alert-3907e571.js";import{P as W}from"./Person-205868f6.js";import{L as J}from"./Lock-d70a65ee.js";import{V as X,a as ee}from"./VisibilityOff-ba84383b.js";import{S as ce,a as z,B as se,C as Ue}from"./Save-4764234f.js";import{K as te}from"./VpnKey-eb620edb.js";import{S as Te}from"./Snackbar-21fedd5c.js";import"./OutlinedInput-42254326.js";import"./Select-237f65fb.js";import"./FormHelperText-b8c529e9.js";import"./colorManipulator-fa7bdb26.js";function ze(t){return pe("MuiCardActions",t)}fe("MuiCardActions",["root","spacing"]);const Ee=["disableSpacing","className"],De=t=>{const{classes:i,disableSpacing:s}=t;return ye({root:["root",!s&&"spacing"]},ze,i)},We=je("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,i)=>{const{ownerState:s}=t;return[i.root,!s.disableSpacing&&i.spacing]}})(({ownerState:t})=>H({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),ke=c.forwardRef(function(i,s){const d=ge({props:i,name:"MuiCardActions"}),{disableSpacing:o=!1,className:f}=d,r=be(d,Ee),a=H({},d,{disableSpacing:o}),x=De(a);return e.jsx(We,H({className:ve(x.root,f),ownerState:a,ref:s},r))}),Fe=ke,Me=U(e.jsx("path",{d:"M16 9v10H8V9zm-1.5-6h-5l-1 1H5v2h14V4h-3.5zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2z"}),"DeleteOutlined"),Le=U(e.jsx("path",{d:"M4 6h18V4H4c-1.1 0-2 .9-2 2v11H0v3h14v-3H4zm19 2h-6c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1m-1 9h-4v-7h4z"}),"Devices"),Re=U(e.jsx("path",{d:"M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2-.13-.24-.04-.55.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67-.09.18-.26.28-.44.28M3.5 9.72c-.1 0-.2-.03-.29-.09-.23-.16-.28-.47-.12-.7.99-1.4 2.25-2.5 3.75-3.27C9.98 4.04 14 4.03 17.15 5.65c1.5.77 2.76 1.86 3.75 3.25.16.22.11.54-.12.7-.23.16-.54.11-.7-.12-.9-1.26-2.04-2.25-3.39-2.94-2.87-1.47-6.54-1.47-9.4.01-1.36.7-2.5 1.7-3.4 2.96-.08.14-.23.21-.39.21m6.25 12.07c-.13 0-.26-.05-.35-.15-.87-.87-1.34-1.43-2.01-2.64-.69-1.23-1.05-2.73-1.05-4.34 0-2.97 2.54-5.39 5.66-5.39s5.66 2.42 5.66 5.39c0 .28-.22.5-.5.5s-.5-.22-.5-.5c0-2.42-2.09-4.39-4.66-4.39-2.57 0-4.66 1.97-4.66 4.39 0 1.44.32 2.77.93 3.85.64 1.15 1.08 1.64 1.85 2.42.19.2.19.51 0 .71-.11.1-.24.15-.37.15m7.17-1.85c-1.19 0-2.24-.3-3.1-.89-1.49-1.01-2.38-2.65-2.38-4.39 0-.28.22-.5.5-.5s.5.22.5.5c0 1.41.72 2.74 1.94 3.56.71.48 1.54.71 2.54.71.24 0 .64-.03 1.04-.1.27-.05.53.13.58.41.05.27-.13.53-.41.58-.57.11-1.07.12-1.21.12M14.91 22c-.04 0-.09-.01-.13-.02-1.59-.44-2.63-1.03-3.72-2.1-1.4-1.39-2.17-3.24-2.17-5.22 0-1.62 1.38-2.94 3.08-2.94 1.7 0 3.08 1.32 3.08 2.94 0 1.07.93 1.94 2.08 1.94s2.08-.87 2.08-1.94c0-3.77-3.25-6.83-7.25-6.83-2.84 0-5.44 1.58-6.61 4.03-.39.81-.59 1.76-.59 2.8 0 .78.07 2.01.67 3.61.1.26-.03.55-.29.64-.26.1-.55-.04-.64-.29-.49-1.31-.73-2.61-.73-3.96 0-1.2.23-2.29.68-3.24 1.33-2.79 4.28-4.6 7.51-4.6 4.55 0 8.25 3.51 8.25 7.83 0 1.62-1.38 2.94-3.08 2.94s-3.08-1.32-3.08-2.94c0-1.07-.93-1.94-2.08-1.94s-2.08.87-2.08 1.94c0 1.71.66 3.31 1.87 4.51.95.94 1.86 1.46 3.27 1.85.27.07.42.35.35.61-.05.23-.26.38-.47.38"}),"Fingerprint"),$e=U(e.jsx("path",{d:"M21 10h-8.35C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H13l2 2 2-2 2 2 4-4.04zM7 15c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3"}),"Key"),qe=U(e.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"}),"People"),He=U(e.jsx("path",{d:"M13 8c0-2.21-1.79-4-4-4S5 5.79 5 8s1.79 4 4 4 4-1.79 4-4m2 2v2h3v3h2v-3h3v-2h-3V7h-2v3zM1 18v2h16v-2c0-2.66-5.33-4-8-4s-8 1.34-8 4"}),"PersonAddAlt1"),de=U(e.jsx("path",{d:"M12 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m0 10c2.7 0 5.8 1.29 6 2H6c.23-.72 3.31-2 6-2m0-12C9.79 4 8 5.79 8 8s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 10c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"PersonOutlined"),me=U(e.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),Ve=({activeTab:t,onTabChange:i})=>{const s=re(),d=ae(s.breakpoints.down("sm"));return e.jsx(m,{sx:{background:s.palette.background.paper,borderRadius:2,boxShadow:2,position:"relative",overflow:"hidden"},children:e.jsxs(ne,{value:t,onChange:(o,f)=>i(f),variant:d?"scrollable":"fullWidth",scrollButtons:"auto",sx:{"& .MuiTab-root":{minHeight:64,fontSize:{xs:"0.75rem",sm:"0.875rem"},fontWeight:600,color:s.palette.text.secondary,"&.Mui-selected":{color:s.palette.primary.main}},"& .MuiTabs-indicator":{height:4,borderTopLeftRadius:4,borderTopRightRadius:4}},children:[e.jsx(D,{label:d?"":"Devices",value:"users",icon:e.jsx(Le,{}),iconPosition:"start"}),e.jsx(D,{label:d?"":"Users",value:"devices",icon:e.jsx(qe,{}),iconPosition:"start"}),e.jsx(D,{label:d?"":"Add User",value:"addUser",icon:e.jsx(we,{}),iconPosition:"start"})]})})},Be=Ve,ue=({user:t,onDelete:i})=>{const[s,d]=c.useState(!1),o=()=>{d(!s)},f=(a,x)=>(a==null?void 0:a.charAt(0).toUpperCase())+((x==null?void 0:x.charAt(0).toUpperCase())||""),r=a=>{if(!a)return"#3f51b5";let x=0;for(let u=0;u<a.length;u++)x=a.charCodeAt(u)+((x<<5)-x);let C="#";for(let u=0;u<3;u++){const w=x>>u*8&255;C+=("00"+w.toString(16)).slice(-2)}return C};return e.jsxs(k,{elevation:2,sx:{borderRadius:2,transition:"all 0.3s ease","&:hover":{boxShadow:6,transform:"translateY(-2px)"}},children:[e.jsxs(O,{sx:{pb:1},children:[e.jsxs(m,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsx(_,{sx:{bgcolor:r(t.firstName+t.lastName),width:50,height:50,mr:2,fontWeight:"bold"},children:f(t.firstName,t.lastName)}),e.jsxs(m,{sx:{flexGrow:1},children:[e.jsxs(g,{variant:"h6",component:"div",sx:{fontWeight:"bold",lineHeight:1.2},children:[t.firstName," ",t.lastName]}),e.jsxs(m,{sx:{display:"flex",alignItems:"center",mt:.5},children:[e.jsx(Y,{fontSize:"small",sx:{color:"text.secondary",mr:.5}}),e.jsx(g,{variant:"body2",color:"text.secondary",noWrap:!0,children:t.email})]})]}),e.jsx(Ce,{title:"Delete User",children:e.jsx(V,{size:"small",onClick:i,sx:{color:"error.main","&:hover":{backgroundColor:"error.light",color:"error.dark"}},children:e.jsx(Me,{fontSize:"small"})})})]}),e.jsx(oe,{sx:{my:1.5}}),e.jsx(m,{sx:{mb:1},children:e.jsx(G,{icon:e.jsx(Re,{}),label:`ID: ${t.custommerId.substring(0,8)}...`,size:"small",variant:"outlined",sx:{mb:1}})}),e.jsx(Pe,{in:s,timeout:"auto",unmountOnExit:!0,children:e.jsxs(m,{sx:{mt:2},children:[e.jsxs(g,{variant:"body2",sx:{display:"flex",alignItems:"center",mb:1},children:[e.jsx($e,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),"Password: ",t.password?"*".repeat(8):"Not set"]}),t.phoneNumber&&e.jsxs(g,{variant:"body2",sx:{display:"flex",alignItems:"center"},children:[e.jsx(K,{fontSize:"small",sx:{mr:1,color:"text.secondary"}}),t.phoneNumber]})]})})]}),e.jsx(Fe,{sx:{justifyContent:"flex-end",px:2,pb:2},children:e.jsx(A,{size:"small",onClick:o,endIcon:e.jsx(Ae,{sx:{transform:s?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"}}),children:s?"Hide Details":"Show Details"})})]})},he=({title:t,description:i,icon:s,actionText:d,onAction:o})=>e.jsxs(m,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",py:8,px:2,bgcolor:"background.paper",borderRadius:2,border:"1px dashed",borderColor:"divider"},children:[s&&e.jsx(m,{sx:{color:"text.secondary",mb:2},children:s}),e.jsx(g,{variant:"h6",gutterBottom:!0,fontWeight:"medium",children:t}),e.jsx(g,{variant:"body2",color:"text.secondary",sx:{maxWidth:400,mb:d?3:0},children:i}),d&&o&&e.jsx(A,{variant:"contained",color:"primary",onClick:o,sx:{mt:2},children:d})]}),Oe=({onNotify:t})=>{const[i,s]=c.useState([]),[d,o]=c.useState([]),[f,r]=c.useState(!0),[a,x]=c.useState(""),{fetchCustomers:C,deleteCustomer:u}=F();c.useEffect(()=>{w()},[]),c.useEffect(()=>{if(a.trim()==="")o(i);else{const n=i.filter(h=>`${h.firstName} ${h.lastName}`.toLowerCase().includes(a.toLowerCase())||h.email.toLowerCase().includes(a.toLowerCase())||h.custommerId.toLowerCase().includes(a.toLowerCase()));o(n)}},[a,i]);const w=async()=>{r(!0);try{const n=await C();s(n||[]),o(n||[])}catch(n){console.error("Error fetching users:",n),t("Failed to load users","error")}finally{r(!1)}},j=async n=>{try{await u(n)?(s(i.filter(P=>P.custommerId!==n)),t("User deleted successfully!","success")):t("Failed to delete user!","error")}catch(h){console.error("Error deleting user:",h),t("Error deleting user!","error")}},I=()=>{w(),t("Refreshing user list...","info")};return f?e.jsx(m,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:300},children:e.jsx(M,{})}):e.jsxs(m,{children:[e.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:{xs:"column",sm:"row"},gap:2,mb:3},children:[e.jsxs(g,{variant:"h5",component:"h2",fontWeight:"bold",children:["User Management",e.jsx(G,{label:i.length,color:"primary",size:"small",sx:{ml:2,fontWeight:"bold"}})]}),e.jsxs(m,{sx:{display:"flex",gap:2},children:[e.jsx(y,{placeholder:"Search users",variant:"outlined",size:"small",value:a,onChange:n=>x(n.target.value),InputProps:{startAdornment:e.jsx(N,{position:"start",children:e.jsx(me,{fontSize:"small"})})},sx:{width:{xs:"100%",sm:220}}}),e.jsx(A,{variant:"outlined",startIcon:e.jsx(ie,{}),onClick:I,size:"small"})]})]}),d.length===0?e.jsx(he,{title:"No Users Found",description:a?"No users match your search criteria":"You haven't added any users yet",icon:e.jsx(de,{sx:{fontSize:60}})}):e.jsx(p,{container:!0,spacing:3,children:d.map(n=>e.jsx(p,{item:!0,xs:12,sm:6,md:4,children:e.jsx(ue,{user:n,onDelete:()=>j(n.custommerId)})},n._id))})]})},_e=Oe,Ye=({onNotify:t})=>{const[i,s]=c.useState([]),[d,o]=c.useState([]),[f,r]=c.useState(!0),[a,x]=c.useState(""),{fetchCustomers:C,deleteCustomer:u}=F();c.useEffect(()=>{w()},[]),c.useEffect(()=>{if(a.trim()==="")o(i);else{const n=i.filter(h=>`${h.firstName} ${h.lastName}`.toLowerCase().includes(a.toLowerCase())||h.email.toLowerCase().includes(a.toLowerCase())||h.custommerId.toLowerCase().includes(a.toLowerCase()));o(n)}},[a,i]);const w=async()=>{r(!0);try{const n=await C();s(n||[]),o(n||[])}catch(n){console.error("Error fetching users:",n),t("Failed to load users","error")}finally{r(!1)}},j=async n=>{try{await u(n)?(s(i.filter(P=>P.custommerId!==n)),t("User deleted successfully!","success")):t("Failed to delete user!","error")}catch(h){console.error("Error deleting user:",h),t("Error deleting user!","error")}},I=()=>{w(),t("Refreshing user list...","info")};return f?e.jsx(m,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:300},children:e.jsx(M,{})}):e.jsxs(m,{children:[e.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexDirection:{xs:"column",sm:"row"},gap:2,mb:3},children:[e.jsxs(g,{variant:"h5",component:"h2",fontWeight:"bold",children:["User Management",e.jsx(G,{label:i.length,color:"primary",size:"small",sx:{ml:2,fontWeight:"bold"}})]}),e.jsxs(m,{sx:{display:"flex",gap:2},children:[e.jsx(y,{placeholder:"Search users",variant:"outlined",size:"small",value:a,onChange:n=>x(n.target.value),InputProps:{startAdornment:e.jsx(N,{position:"start",children:e.jsx(me,{fontSize:"small"})})},sx:{width:{xs:"100%",sm:220}}}),e.jsx(A,{variant:"outlined",startIcon:e.jsx(ie,{}),onClick:I,size:"small"})]})]}),d.length===0?e.jsx(he,{title:"No Users Found",description:a?"No users match your search criteria":"You haven't added any users yet",icon:e.jsx(de,{sx:{fontSize:60}})}):e.jsx(p,{container:!0,spacing:3,children:d.map(n=>e.jsx(p,{item:!0,xs:12,sm:6,md:4,children:e.jsx(ue,{user:n,onDelete:()=>j(n.custommerId)})},n._id))})]})},Ke=Ye,Ge=({onNotify:t})=>{const{AddUser:i}=F(),[s,d]=c.useState({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",confirmPassword:"",custommerId:localStorage.getItem("custommerid")}),[o,f]=c.useState({}),[r,a]=c.useState(!1),[x,C]=c.useState(!1),[u,w]=c.useState(!1),[j,I]=c.useState(!1),n=()=>{const v={};return s.firstName.trim()||(v.firstName="First name is required"),s.lastName.trim()||(v.lastName="Last name is required"),/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(v.email="Invalid email format"),/^\d{10}$/.test(s.phoneNumber)||(v.phoneNumber="Phone number must be 10 digits"),(!s.password||s.password.length<6)&&(v.password="Password must be at least 6 characters"),s.password!==s.confirmPassword&&(v.confirmPassword="Passwords do not match"),f(v),Object.keys(v).length===0},h=v=>{const{name:S,value:R}=v.target;d($=>({...$,[S]:R})),o[S]&&f({...o,[S]:null}),j&&I(!1)},P=async v=>{if(v.preventDefault(),a(!0),!n()){t("Please fix the validation errors","error"),a(!1);return}try{const S=await i(s);(S==null?void 0:S.valid)===!1?t(S.message||"Failed to add user!","error"):(I(!0),t("User added successfully under the same customer ID!","success"),d({firstName:"",lastName:"",email:"",phoneNumber:"",password:"",confirmPassword:"",custommerId:localStorage.getItem("custommerid")}))}catch{t("Error adding user!","error")}finally{a(!1)}},L=()=>{C(!x)},T=()=>{w(!u)};return e.jsxs(B,{elevation:2,sx:{maxWidth:600,margin:"0 auto",p:{xs:2,sm:4},borderRadius:2},children:[e.jsxs(m,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:3},children:[e.jsx(_,{sx:{width:80,height:80,bgcolor:"primary.main",mb:2,boxShadow:2},children:e.jsx(He,{sx:{fontSize:40}})}),e.jsx(g,{variant:"h5",component:"h2",fontWeight:"bold",children:"Add New User"}),e.jsx(g,{variant:"body2",color:"text.secondary",align:"center",sx:{mt:1},children:"Create a new user account under your customer ID"})]}),j&&e.jsx(le,{severity:"success",sx:{mb:3,borderRadius:1},onClose:()=>I(!1),children:"User has been added successfully!"}),e.jsxs(m,{component:"form",onSubmit:P,noValidate:!0,children:[e.jsxs(p,{container:!0,spacing:2,children:[e.jsx(p,{item:!0,xs:12,sm:6,children:e.jsx(y,{label:"First Name",variant:"outlined",fullWidth:!0,name:"firstName",value:s.firstName,onChange:h,required:!0,error:!!o.firstName,helperText:o.firstName,InputProps:{startAdornment:e.jsx(N,{position:"start",children:e.jsx(W,{color:"action"})})}})}),e.jsx(p,{item:!0,xs:12,sm:6,children:e.jsx(y,{label:"Last Name",variant:"outlined",fullWidth:!0,name:"lastName",value:s.lastName,onChange:h,required:!0,error:!!o.lastName,helperText:o.lastName,InputProps:{startAdornment:e.jsx(N,{position:"start",children:e.jsx(W,{color:"action"})})}})}),e.jsx(p,{item:!0,xs:12,children:e.jsx(y,{label:"Email Address",variant:"outlined",fullWidth:!0,name:"email",type:"email",value:s.email,onChange:h,required:!0,error:!!o.email,helperText:o.email,InputProps:{startAdornment:e.jsx(N,{position:"start",children:e.jsx(Y,{color:"action"})})}})}),e.jsx(p,{item:!0,xs:12,children:e.jsx(y,{label:"Phone Number",variant:"outlined",fullWidth:!0,name:"phoneNumber",value:s.phoneNumber,onChange:h,required:!0,error:!!o.phoneNumber,helperText:o.phoneNumber,InputProps:{startAdornment:e.jsx(N,{position:"start",children:e.jsx(K,{color:"action"})})}})}),e.jsx(p,{item:!0,xs:12,sm:6,children:e.jsx(y,{label:"Password",variant:"outlined",fullWidth:!0,name:"password",type:x?"text":"password",value:s.password,onChange:h,required:!0,error:!!o.password,helperText:o.password,InputProps:{startAdornment:e.jsx(N,{position:"start",children:e.jsx(J,{color:"action"})}),endAdornment:e.jsx(N,{position:"end",children:e.jsx(V,{"aria-label":"toggle password visibility",onClick:L,edge:"end",children:x?e.jsx(X,{}):e.jsx(ee,{})})})}})}),e.jsx(p,{item:!0,xs:12,sm:6,children:e.jsx(y,{label:"Confirm Password",variant:"outlined",fullWidth:!0,name:"confirmPassword",type:u?"text":"password",value:s.confirmPassword,onChange:h,required:!0,error:!!o.confirmPassword,helperText:o.confirmPassword,InputProps:{startAdornment:e.jsx(N,{position:"start",children:e.jsx(J,{color:"action"})}),endAdornment:e.jsx(N,{position:"end",children:e.jsx(V,{"aria-label":"toggle confirm password visibility",onClick:T,edge:"end",children:u?e.jsx(X,{}):e.jsx(ee,{})})})}})})]}),e.jsx(m,{sx:{display:"flex",justifyContent:"center",mt:4},children:e.jsx(A,{type:"submit",variant:"contained",color:"primary",size:"large",disabled:r,startIcon:r?e.jsx(M,{size:20}):e.jsx(ce,{}),sx:{py:1.5,px:4,borderRadius:2,boxShadow:2,fontWeight:"bold"},children:r?"Creating...":"Create User"})})]}),e.jsx(oe,{sx:{my:4}}),e.jsxs(k,{sx:{p:2,bgcolor:"background.default",borderRadius:2},children:[e.jsxs(g,{variant:"body2",color:"text.secondary",align:"center",children:["Customer ID: ",e.jsx("b",{children:localStorage.getItem("custommerid")||"Not available"})]}),e.jsx(g,{variant:"caption",color:"text.secondary",align:"center",display:"block",sx:{mt:1,opacity:.7},children:"New users will be created under your customer ID and will have access to your registered devices"})]})]})},Ze=Ge;function Qe(){const{fetchUserProfile:t,updateUserProfile:i}=F(),[s,d]=c.useState(null),[o,f]=c.useState(!1),[r,a]=c.useState({}),[x,C]=c.useState(!0),[u,w]=c.useState(!1),[j,I]=c.useState({}),[n,h]=c.useState(0),P=re(),L=ae(P.breakpoints.down("sm"));c.useEffect(()=>{(async()=>{try{const l=await t();d(l==null?void 0:l.user),a({firstName:(l==null?void 0:l.user.firstName)||"",lastName:(l==null?void 0:l.user.lastName)||"",email:(l==null?void 0:l.user.email)||"",phoneNumber:(l==null?void 0:l.user.phoneNumber)||"",custommerId:(l==null?void 0:l.user.custommerId)||"",password:""}),C(!1)}catch(l){console.error("Error fetching user profile:",l),q.error("Unable to load profile data"),C(!1)}})()},[t]);const T=b=>{const{name:l,value:E}=b.target;a({...r,[l]:E}),j[l]&&I({...j,[l]:null})},v=()=>{const b={};r.firstName||(b.firstName="First name is required"),r.lastName||(b.lastName="Last name is required"),r.email||(b.email="Email is required"),r.phoneNumber||(b.phoneNumber="Phone number is required"),r.password&&r.password.length<6&&(b.password="Password must be at least 6 characters");const l=/^[0-9]{10}$/;r.phoneNumber&&!l.test(r.phoneNumber)&&(b.phoneNumber="Phone number must be 10 digits");const E=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/;return r.email&&!E.test(r.email)&&(b.email="Invalid email format"),b},S=async()=>{const b=v();if(I(b),Object.keys(b).length>0)return;const l={...r};try{w(!0),await i(l),f(!1),a({...r,password:""}),q.success("Profile updated successfully!")}catch(E){console.error("Error updating profile:",E),q.error("Failed to update profile. Please try again.")}finally{w(!1)}},R=(b,l)=>{h(l)},$=()=>!r.firstName||!r.lastName?"U":`${r.firstName.charAt(0)}${r.lastName.charAt(0)}`,xe=()=>{a({firstName:(s==null?void 0:s.firstName)||"",lastName:(s==null?void 0:s.lastName)||"",email:(s==null?void 0:s.email)||"",phoneNumber:(s==null?void 0:s.phoneNumber)||"",custommerId:(s==null?void 0:s.custommerId)||"",password:""}),I({}),f(!1)};return x?e.jsx(e.Fragment,{children:e.jsx(Z,{maxWidth:"md",sx:{mt:8,mb:4},children:e.jsx(B,{elevation:3,sx:{p:4,borderRadius:2},children:e.jsxs(p,{container:!0,spacing:3,children:[e.jsxs(p,{item:!0,xs:12,md:4,container:!0,direction:"column",alignItems:"center",children:[e.jsx(z,{variant:"circular",width:120,height:120}),e.jsx(z,{variant:"text",width:"80%",height:30,sx:{mt:2}}),e.jsx(z,{variant:"text",width:"60%",height:20})]}),e.jsxs(p,{item:!0,xs:12,md:8,children:[e.jsx(z,{variant:"text",width:"40%",height:40}),e.jsx(z,{variant:"rectangular",width:"100%",height:100,sx:{mt:2}}),e.jsx(z,{variant:"rectangular",width:"100%",height:100,sx:{mt:2}})]})]})})})}):e.jsx(e.Fragment,{children:e.jsx(Z,{maxWidth:"md",sx:{mt:8,mb:4},children:e.jsx(Ie,{direction:"down",in:!x,timeout:500,children:e.jsxs(B,{elevation:3,sx:{borderRadius:2,overflow:"hidden",bgcolor:"background.paper",transition:"all 0.3s ease-in-out"},children:[e.jsx(m,{sx:{p:4,bgcolor:"primary.main",color:"primary.contrastText",background:"linear-gradient(to right, #00796b, #4db6ac)"},children:e.jsxs(p,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(p,{item:!0,children:e.jsx(_,{sx:{width:80,height:80,bgcolor:"white",color:"primary.main",fontSize:32,fontWeight:"bold",border:"4px solid white",boxShadow:P.shadows[3]},children:$()})}),e.jsxs(p,{item:!0,xs:!0,children:[e.jsxs(g,{variant:"h4",fontWeight:"bold",children:[r.firstName," ",r.lastName]}),e.jsxs(m,{display:"flex",alignItems:"center",mt:.5,children:[e.jsx(se,{fontSize:"small"}),e.jsx(g,{variant:"subtitle1",sx:{ml:1,opacity:.8},children:r.custommerId})]})]})]})}),e.jsx(m,{sx:{borderBottom:1,borderColor:"divider"},children:e.jsxs(ne,{value:n,onChange:R,variant:L?"fullWidth":"standard",indicatorColor:"secondary",children:[e.jsx(D,{label:"Personal Details",icon:e.jsx(W,{}),iconPosition:"start",sx:{fontWeight:"medium"}}),e.jsx(D,{label:"Account Security",icon:e.jsx(te,{}),iconPosition:"start",sx:{fontWeight:"medium"}})]})}),e.jsxs(m,{sx:{p:3},children:[n===0&&e.jsx(Q,{in:n===0,timeout:500,children:e.jsx(m,{children:e.jsxs(p,{container:!0,spacing:3,children:[e.jsx(p,{item:!0,xs:12,sm:6,children:e.jsx(y,{label:"First Name",variant:"outlined",fullWidth:!0,disabled:!o||u,name:"firstName",value:r.firstName,onChange:T,error:!!j.firstName,helperText:j.firstName,InputProps:{startAdornment:e.jsx(W,{color:"action",sx:{mr:1}})}})}),e.jsx(p,{item:!0,xs:12,sm:6,children:e.jsx(y,{label:"Last Name",variant:"outlined",fullWidth:!0,disabled:!o||u,name:"lastName",value:r.lastName,onChange:T,error:!!j.lastName,helperText:j.lastName,InputProps:{startAdornment:e.jsx(W,{color:"action",sx:{mr:1}})}})}),e.jsx(p,{item:!0,xs:12,children:e.jsx(y,{label:"Email Address",variant:"outlined",fullWidth:!0,disabled:!o||u,name:"email",value:r.email,onChange:T,error:!!j.email,helperText:j.email,InputProps:{startAdornment:e.jsx(Y,{color:"action",sx:{mr:1}})}})}),e.jsx(p,{item:!0,xs:12,children:e.jsx(y,{label:"Phone Number",variant:"outlined",fullWidth:!0,disabled:!o||u,name:"phoneNumber",value:r.phoneNumber,onChange:T,error:!!j.phoneNumber,helperText:j.phoneNumber,InputProps:{startAdornment:e.jsx(K,{color:"action",sx:{mr:1}})}})})]})})}),n===1&&e.jsx(Q,{in:n===1,timeout:500,children:e.jsxs(m,{children:[e.jsx(k,{variant:"outlined",sx:{mb:3},children:e.jsxs(O,{children:[e.jsx(g,{variant:"h6",gutterBottom:!0,children:"Change Password"}),e.jsx(g,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Update your password to keep your account secure. Your password should be at least 6 characters long."}),e.jsx(y,{label:"New Password",variant:"outlined",fullWidth:!0,type:"password",name:"password",value:r.password||"",onChange:T,disabled:!o||u,error:!!j.password,helperText:j.password,InputProps:{startAdornment:e.jsx(te,{color:"action",sx:{mr:1}})},sx:{mt:2}})]})}),e.jsx(k,{variant:"outlined",children:e.jsxs(O,{children:[e.jsx(g,{variant:"h6",gutterBottom:!0,children:"Account ID"}),e.jsx(g,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Your unique account identifier."}),e.jsx(m,{display:"flex",alignItems:"center",children:e.jsx(y,{variant:"outlined",fullWidth:!0,value:r.custommerId||"",disabled:!0,InputProps:{readOnly:!0,startAdornment:e.jsx(se,{color:"action",sx:{mr:1}})}})})]})})]})}),e.jsx(m,{sx:{mt:4,display:"flex",justifyContent:"flex-end",gap:2},children:o?e.jsxs(e.Fragment,{children:[e.jsx(A,{variant:"outlined",color:"inherit",startIcon:e.jsx(Ue,{}),onClick:xe,disabled:u,children:"Cancel"}),e.jsx(A,{variant:"contained",color:"primary",startIcon:u?e.jsx(M,{size:20,color:"inherit"}):e.jsx(ce,{}),onClick:S,disabled:u,children:u?"Saving...":"Save Changes"})]}):e.jsx(A,{variant:"contained",color:"primary",startIcon:e.jsx(Ne,{}),onClick:()=>f(!0),children:"Edit Profile"})})]})]})})})})}function js(){const[t,i]=c.useState("devices"),[s,d]=c.useState({open:!1,message:"",severity:"info"}),o=a=>{i(a)},f=(a,x="info")=>{d({open:!0,message:a,severity:x})},r=()=>{d(a=>({...a,open:!1}))};return e.jsx(Se,{title:"Admin Dashboard",children:e.jsxs(m,{sx:{padding:{xs:2,sm:3,md:4},backgroundColor:"background.default",minHeight:"calc(100vh - 56px)"},children:[e.jsx(Be,{activeTab:t,onTabChange:o}),e.jsxs(m,{sx:{mt:4},children:[t==="devices"&&e.jsx(_e,{onNotify:f}),t==="profile"&&e.jsx(Qe,{}),t==="users"&&e.jsx(Ke,{onNotify:f}),t==="addUser"&&e.jsx(Ze,{onNotify:f})]}),e.jsx(Te,{open:s.open,autoHideDuration:6e3,onClose:r,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:e.jsx(le,{onClose:r,severity:s.severity,variant:"filled",sx:{width:"100%"},children:s.message})})]})})}export{js as default};
