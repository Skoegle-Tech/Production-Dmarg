import{r,j as e,L as f,C as y,B as b,T as a,f as w,av as v}from"./index-7eb3e469.js";import{T as j}from"./TextField-041322db.js";import"./OutlinedInput-42254326.js";import"./Select-237f65fb.js";import"./FormHelperText-b8c529e9.js";function F(){const[s,p]=r.useState(""),[l,t]=r.useState(""),[d,c]=r.useState(""),[n,u]=r.useState(!1);r.useEffect(()=>{document.title="Dmarg Forgot Password"},[]);const x=async i=>{var m,g;if(i.preventDefault(),!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)){t("Please enter a valid email address."),c("");return}try{u(!0),t("");const o=await v.post("https://api.skoegle.com/api/auth/forgotpassword",{email:s});if(o.status===200){const h=o.data;h.valid?(c("Password reset link has been sent to your email."),console.log("Token:",h.token)):t("Something went wrong. Please try again.")}else t("Something went wrong. Please try again.")}catch(o){t(((g=(m=o.response)==null?void 0:m.data)==null?void 0:g.error)||"User not registered with this email id.")}finally{u(!1)}};return e.jsx(f,{title:"Dmarg Forgot Password",children:e.jsx(y,{maxWidth:"sm",children:e.jsxs(b,{sx:{mt:8,mb:10,p:4,boxShadow:3,borderRadius:2,textAlign:"center",bgcolor:"background.paper"},children:[e.jsx(a,{variant:"h5",fontWeight:"bold",gutterBottom:!0,children:"Forgot Password?"}),e.jsx(a,{variant:"body2",color:"textSecondary",gutterBottom:!0,children:"Enter your email, and we'll send you a link to reset your password."}),e.jsxs("form",{onSubmit:x,children:[e.jsx(j,{fullWidth:!0,label:"Enter Email",type:"email",variant:"outlined",margin:"normal",value:s,onChange:i=>p(i.target.value),disabled:n}),l&&e.jsx(a,{color:"error",variant:"body2",mt:1,children:l}),d&&e.jsx(a,{color:"success.main",variant:"body2",mt:1,children:d}),e.jsx(w,{fullWidth:!0,type:"submit",variant:"contained",color:"primary",sx:{mt:2,py:1,backgroundColor:"#00796B","&:hover":{backgroundColor:"#005a4f"}},disabled:n,children:n?"Sending...":"Send Reset Link"})]})]})})})}export{F as default};
